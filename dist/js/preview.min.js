"use strict";!function(){var n,o,t={css:function(e,t){for(var i in t)e.style[i]=t[i]},addEvent:(n=window).addEventListener?function(e,t,i,s){"mousewheel"===t&&document.mozFullScreen!==o&&(t="DOMMouseScroll"),e.addEventListener(t,function(e){i.call(this,m(e))},s||!1)}:n.attachEvent?function(t,e,i,s){t.attachEvent("on"+e,function(e){e=e||n.event,i.call(t,m(e))})}:function(){}};function m(e){var t=e.type;return"DOMMouseScroll"!=t&&"mousewheel"!=t||(e.delta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3),e.srcElement&&!e.target&&(e.target=e.srcElement),e.preventDefault||e.returnValue===o||(e.preventDefault=function(){e.returnValue=!1}),e}function e(e){if(e.imgWrap&&""!=e.imgWrap){for(var t in this.Opt={imgWrap:"",beforeCreat:function(){},afterCreat:function(){}},this.Opt)e[t]&&(this.Opt[t]=e[t]);this.elemPreviewContain=document.getElementsByTagName("body")[0],this.elemContain=document.getElementById(this.Opt.imgWrap),this.elemPreviewImg=null,this.elemPreviewClose=null,this.elemPreviewCloseBj=null,this.imgBg=null,this.moveObj=null,this.init(),this.LEFT=this.elemPreviewContain.offsetWidth/2,this.TOP=this.elemPreviewContain.offsetHeight/2,this.onOff=!0,this.startX=0,this.startY=0,this.moveX=0,this.moveY=0,this._WIDTH=0,this._HEIGHT=0,this.WIDTH=0,this.HEIGHT=0}else alert("请填写图片容器id")}e.VERSION="1.0.0";(new Date).getTime();e.initParams={bgClass:"img_bgmask"},e.prototype={constructor:e,init:function(){var s=this;this.imgBg=document.createElement("div"),this.imgBg.className="img_bgmask",t.css(this.imgBg,{position:"fixed",left:0,top:0,width:"100%",height:"100%",fontSize:0,background:"rgba(0,0,0,.6)",display:"none"}),this.imgBg.innerHTML='<div class="popurNode" style="position: absolute;left:0;top:0;width:100%;height:100%;z-index:1"></div><span style="position: absolute;top: 50px;right:50px;z-index: 10;height: 48px;width: 48px;background:red;cursor:pointer;border-radius:50%;" class="close_bgmask"></span><div style="position:absolute;left:50%;top:50%;" class="view_img_wrap"><img style="width:100%;height:100%;position: relative;z-index: -1;" src="" alt=""></div>',this.elemPreviewContain.appendChild(this.imgBg),this.elemPreviewImg=this.imgBg.getElementsByTagName("img")[0],this.moveObj=this.elemPreviewImg.parentNode,this.elemPreviewClose=this.imgBg.getElementsByTagName("span")[0],this.elemPreviewCloseBj=this.imgBg.querySelector(".popurNode"),this.elemContain.addEventListener("click",function(e){(e=e||window.event).stopPropagation();e=e.target;"img"===e.tagName.toLowerCase()&&(s.elemPreviewImg.src=e.src,t.css(s.imgBg,{display:"block"}),s._WIDTH=s.WIDTH=s.elemPreviewImg.offsetWidth,s._HEIGHT=s.HEIGHT=s.elemPreviewImg.offsetHeight,t.css(s.moveObj,{width:s.WIDTH+"px",marginLeft:-s.WIDTH/2+"px",marginTop:-s.HEIGHT/2+"px",left:"50%",top:"50%"}))},!1),this.moveObj.addEventListener("mousedown",function(e){function i(e){s.onOff=!1,s.moveX=e.pageX-s.startX+s.LEFT,s.moveY=e.pageY-s.startY+s.TOP,t.css(s.moveObj,{left:s.moveX+"px",top:s.moveY+"px"}),e.preventDefault()}(e=e||window.event).stopPropagation(),s.onOff=!0,s.startX=e.pageX,s.startY=e.pageY,document.addEventListener("mousemove",i,!1),document.addEventListener("mouseup",function e(t){if(document.removeEventListener("mousemove",i,!1),document.removeEventListener("mouseup",e,!1),s.onOff)return!1;s.LEFT=s.moveX,s.TOP=s.moveY},!1),e.preventDefault()},!1),this.elemPreviewClose.onclick=function(){s.previewClose()},this.elemPreviewCloseBj.onclick=function(){s.previewClose()},t.addEvent(this.imgBg,"mousewheel",function(e){this.WIDTH=s.elemPreviewImg.offsetWidth,0<e.delta?t.css(s.moveObj,{width:this.WIDTH+20+"px"}):t.css(s.moveObj,{width:this.WIDTH-20+"px"}),this.HEIGHT=s.elemPreviewImg.offsetHeight,t.css(s.moveObj,{marginLeft:-this.WIDTH/2+"px",marginTop:-this.HEIGHT/2+"px"})})},previewClose:function(){this.LEFT=this.elemPreviewContain.offsetWidth/2,this.TOP=this.elemPreviewContain.offsetHeight/2,t.css(this.moveObj,{width:this._WIDTH+"px"}),t.css(this.imgBg,{display:"none"})}},window.Preview=e}();