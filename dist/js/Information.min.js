"use strict";function Product(){this.cart_btn=document.querySelector("#buy"),this.buy=document.querySelectorAll(".addToCart"),this.init(),this.addEvent()}Product.prototype={constructor:Product,addEvent:function(){var o=this;this.cart_btn.onclick=function(){location.href="cart.html"};for(var t=0,e=this.buy.length;t<e;t++)this.buy[t].onclick=function(){var t=this.parentNode.getAttribute("data-good-id"),e=this.parentNode.children[0].children[0].src,n=this.parentNode.children[2].innerText,r=parseInt(this.previousElementSibling.previousElementSibling.previousElementSibling.children[0].children[0].innerText),i=window.localStorage,c=i.getItem("carts")?i.getItem("carts"):"",c=o.convertStrToObj(c);t in c?c[t].num++:c[t]={name:n,price:r,src:e,num:1},i.setItem("carts",JSON.stringify(c));c=/(\d+)/.exec(o.cart_btn.value)[1];o.cart_btn.value="购物车(".concat(++c,")")}},init:function(){var t,e=window.localStorage,e=e.getItem("carts")?e.getItem("carts"):"",n=this.convertStrToObj(e),r=0;for(t in n)r+=n[t].num;this.cart_btn.value="购物车(".concat(r,")")},convertStrToObj:function(t){return t?JSON.parse(t):{}}},new Product;